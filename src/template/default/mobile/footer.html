
    <!--footer-->
    <footer id="footer">
      <div class="clearfix"></div>
      <div class="to-top" onclick="window.scrollTo('0','0')">返回顶部<i></i></div>
      <a href="{$domain}?ismobile=1" class="copyright" onclick="window.location.reload();return false;">&copy;2013-{date('Y')} <span>{$siteName}</span> </a>
    </footer>
    <!--/footer-->

<script>
document.addEventListener('WeixinJSBridgeReady', function onBridgeReady()  { 
  WeixinJSBridge.call('hideToolbar');
});

//分享商品的时候加上商品图片
function _SiteWXShare(img, width, height, title, desc,url,appid){
  //初始化参数
  img    = img || '{if @$item[picid]}{thumb($item[picid], 640, 0)}{else}{$staticPath}images/wx-image.jpg{/if}';
  width  = width || 100;
  height = height || 100;
  title  = title || $('head title').text();
  desc   = desc || '{if @$item[description]}{str_replace(array("\r\n", "\r", "\n"), "", addslashes($item[description]))}{/if}';
  url    = url || document.location.href;
  appid  = appid || '';

  //微信内置方法
  function _ShareFriend() {
	  WeixinJSBridge.invoke('sendAppMessage',{
		  'appid': appid,
		  'img_url': img,
		  'img_width': width,
		  'img_height': height,
		  'link': url,
		  'desc': desc,
		  'title': title
		  }, function(res){ })
  }

  function _ShareTL() {
	  WeixinJSBridge.invoke('shareTimeline',{
		  'img_url': img,
		  'img_width': width,
		  'img_height': height,
		  'link': url,
		  'desc': desc,
		  'title': title
	   }, function(res) { });
  }
  function _ShareWB() {
	  WeixinJSBridge.invoke('shareWeibo',{
		  'content': desc,
		  'url': url,
	  }, function(res) { });
  }
  // 当微信内置浏览器初始化后会触发WeixinJSBridgeReady事件。
  document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {
		  // 发送给好友
		  WeixinJSBridge.on('menu:share:appmessage', function(argv){
			  _ShareFriend();
		});

		  // 分享到朋友圈
		  WeixinJSBridge.on('menu:share:timeline', function(argv){
			  _ShareTL();
			  });

		  // 分享到微博
		  WeixinJSBridge.on('menu:share:weibo', function(argv){
			  _ShareWB();
		 });
  }, false);
}
_SiteWXShare();
</script>

<!--{#$bm = benchmark('m_tpl_footer', 1);#}-->
<!--[ Processed in {$bm[time]}(s),{#print Factory::db()->execTimes#} querys,{$bm[mem]}(M mem)]-->


</body>
</html>
