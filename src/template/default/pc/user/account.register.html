{tpl header}

<div class="section ucenter">
  <div class="section-hd"><span class="l"></span><span class="r"></span></div>
  <div class="section-bd">
      <h2 class="page-title">注册成为{$siteName}会员</h2>
      <div class="main">
        {tpl prompt}
        <form action="{url user.account.register}" method="post" target="_self" id="regform" class="form">
          <input type="hidden" class="text" name="accounttype" id="accounttype" value="member" autocomplete="off" />
          <p>
            <label class="form-row-l" for="email">邮　箱：</label>
            <input type="text" class="text" name="email" id="email" value="{$_REQUEST[email]}" autocomplete="off" /> <b class="red">*</b>
          </p>
          <p>
            <label class="form-row-l" for="password">密　码：</label>
            <input type="password" class="text" name="password" id="password" value="" autocomplete="off" /> <b class="red">*</b>
          </p>
          <p>
            <label class="form-row-l" for="password2">确认密码：</label>
            <input type="password" class="text" name="password2" id="password2" value="" autocomplete="off" /> <b class="red">*</b>
          </p>
          <p>
            <label class="form-row-l" for="secode">验证码：</label>
            <input type="text" class="text" name="secode" id="secode" size="5" autocomplete="off" onkeyup="this.value=this.value.toUpperCase()" /> <b class="red">*</b>
            <a class="secode-img" onclick="$(this).find('img').attr('src', '{url system.misc.captcha/entry:reg}/rand:'+Math.random());$('#secode').focus();" href="javascript:;"><img src="{url system.misc.captcha/entry:reg}">换一张</a>
          </p>
          <p>
            <label class="form-row-l agreement-label" for="agreement">&nbsp;</label>
            <label for="agreement">
            <input type="checkbox" tabindex="5" name="agreement" id="agreement" checked="checked">
            <b class="red">*</b>
            我已经认真阅读并同意{$siteName}的《<a href="javascript:;" onclick="$('#agreement-w').toggle();">使用协议</a>》。
            </label>
          </p>
          <p id="agreement-w" style='display:none;'><label class="form-row-l">&nbsp;</label><textarea style='width:550px;height:150px;'>{Config::get('user_reg_pact')}</textarea></p>
          <p><label class="form-row-l" for="nickname">&nbsp;</label><input type="submit" value="注册" class="btn" /></p>
        </form>
      </div>
      <div class="side">
        &gt; 已经有{$siteName}的账号？<a href="{url user.account.login}">登录</a><br />
        &gt; 忘记密码了？<a href="{url user.account.forgetpassword}">取回密码</a>
      </div>
  </div>
  <div class="section-ft"><span class="l"></span><span class="r"></span></div>
</div>
<script type="text/javascript" src="{$basePath}static/js/jquery.validate.min.js"></script>
<script type="text/javascript" src="{$basePath}static/js/locale/jquery.validate.messages.zh_CN.js"></script>
<script type="text/javascript">
//<![CDATA[
$(function(){
	$('#password').val('');
	var validator = $("#regform").validate({
		rules: {
			email: {
				required: true,
				email:true
			},
			nickname: "required",
			secode: "required",
			agreement: "required",
		    password: {
				required: true,
				minlength: 6
			},
			password2: {
				equalTo:"#password" 
			}
		},
		messages: {
			email: {
				required: "请输入邮箱",
				email: "请输入正确的邮箱号码"
			},
			nickname: "请输入您的名号",
			secode: "请输入验证码",
			agreement: "请确认您已同意我们的协议",
			password: {
				required: '请输入密码',
				minlength: jQuery.format("密码不能小于{0}个字符") 
			},
			password2: {
				equalTo:"两次输入密码不一致" 
			}
		},
		errorPlacement: function(error, element) {
			error.appendTo( element.next() );				
		},
		success: function(label) {
			label.html("&nbsp;").addClass("checked");
		}
	});
});

//]]>
</script>
{tpl footer}