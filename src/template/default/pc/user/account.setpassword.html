{tpl header}

<div class="section">
  <div class="section-hd"><span class="l"></span><span class="r"></span></div>
  <div class="section-bd">
      <div class="main">
        {tpl user/center.tab}
        {tpl prompt}
        <form action="{url $mod.$ctl.$act/hash:$hash}" method="post" enctype="multipart/form-data" target="_self" class="form" id="form">
        
            <p>
              <label for="email" class="form-row-l">旧密码：</label> 
              <input class="text" type="password" name="oldpassword" id="oldpassword" value="" /> 
              <b class="red">*</b> <span class="message"></span>
            </p>
        
            <p>
              <label for="email" class="form-row-l">新密码：</label> 
              <input class="text" type="password" name="newpassword" id="newpassword" value="" /> 
              <b class="red">*</b> <span class="message"></span>
            </p>
            <p>
              <label for="email" class="form-row-l">确认新密码：</label> 
              <input class="text" type="password" name="newpassword2" id="newpassword2" value="" /> 
              <b class="red">*</b> <span class="message"></span>
            </p>

          <!--{if $captchaOpt[setpassword]}-->
          <div class="form-row">
            <label class="form-row-l" for="secode">验证码：</label>
            <div class="form-row-r">
                <input type="text" class="text" name="secode" id="secode" size="5" onkeyup="this.value=this.value.toUpperCase()" /> <b class="red">*</b>
                <a class="secode-img" onclick="$(this).find('img').attr('src', '{url system.misc.captcha/entry:setpassword}/rand:'+Math.random());$('#secode').focus();" href="javascript:;"><img src="{url system.misc.captcha/entry:setpassword}">换一张</a>
            </div>
          </div>
          {/if}
          <div class="form-row">
            <label class="form-row-l" for="nickname">&nbsp;</label>
            <div class="form-row-r"><input type="submit" value="确定修改" class="btn" /></div>
          </div>
        </form>
      </div>
      {tpl user/center.side}
  </div>
  <div class="section-ft"><span class="l"></span><span class="r"></span></div>
</div>
<script type="text/javascript" language="javascript" src="{$basePath}static/js/jquery.validate.min.js"></script>
<script type="text/javascript" language="javascript" src="{$basePath}static/js/jquery.validate.cfg.js"></script>
<script type="text/javascript" language="javascript" src="{$basePath}static/js/locale/jquery.validate.messages.zh_CN.js"></script>
<script type="text/javascript">
//<![CDATA[
$(function(){	
	var validator = $("#form").validate({
		rules: {
			oldpassword: "required",
			newpassword: {
				required: true,
				minlength: 6
			},
			newpassword2: {
				equalTo:"#newpassword" 
			}
		},
		messages: {
			oldpassword: '请输入旧密码',
			newpassword: {
				required: '请输入新密码',
				minlength: jQuery.format("密码不能小于{0}个字符") 
			},newpassword2: {
				equalTo:"两次输入密码不一致" 
			}
		},
		errorPlacement: function(error, element) {
			error.appendTo( element.next() );				
		},
		success: function(label) {
			label.html("&nbsp;").addClass("checked");
		}
	});
});

//]]>
</script>
{tpl footer}