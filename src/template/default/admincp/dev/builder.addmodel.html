<!--{tpl header}-->
<!--{if false}-->
<link rel="stylesheet" rev="stylesheet" href="/template/default/admincp/style/style.css" type="text/css" media="all" />
<!--{/if}-->
<!--{tpl dev/builder.navtab}-->

<form id="form" method="post" enctype="application/x-www-form-urlencoded" target="_self">
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="tb mt">
    <tr>
      <th width="140" align="right" valign="middle">模块</th>
      <td>
        <select name="themod">
          <option value="" {if !$request->getRequest('themod')}selected="selected"{/if}>请选择模块</option>
          <!--{loop $mods $ml}-->
          <!--{loop $ml $mi}-->
          <option value="{$mi[id]}" {if $request->getRequest('themod') == $mi[id]}selected="selected"{/if}>{$mi[name]}</option>
          <!--{/loop}-->
          <!--{/loop}-->
        </select>
        <b class="red">*</b>
      </td>
    </tr>
    <tr>
      <th width="140" align="right" valign="middle">数据表名</th>
      <td>
        <input name="db_table" type="text" class="text-box" id="db_table" value="" />
      </td>
    </tr>
    <tr>
      <th width="140" align="right" valign="middle">模型类名</th>
      <td>
        <input name="model" type="text" class="text-box" id="model" value="" style="text-align:right;" />Model <b class="red">*</b>
        <span class="note">区分大小写，类名后将自动添加Model。</span>
      </td>
    </tr>
    <tr>
      <th width="140" align="right" valign="middle">模型简单描述</th>
      <td><input name="name" type="text" class="text-box" id="name" value="" /> <span class="note">用一句简短的话描述模型</span></td>
    </tr>
    <tr>
      <th align="right" valign="middle">模型说明</th>
      <td><textarea name="desc" cols="50" rows="5"></textarea></td>
    </tr>
    <tr>
      <th align="right" valign="middle" class="nobd">&nbsp;</th>
      <td class="nobd">
        <input class="btn" type="submit" value="添加模型" />
        <input  class="btn" type="reset" name="reset" value="重置" />
      </td>
    </tr>
</table>
</form>
<script type="text/javascript">
//<![CDATA[
$(function(){
	var validator = $("#form").validate({
		rules: {
			themod: "required",
			model: "required"
		},
		messages: {
			themod: "请选择模块",
			model: "请输入模型类名"
		},
		errorPlacement: function(error, element) {
			error.appendTo( element.next() );				
		},
		success: function(label) {
			label.html("&nbsp;").addClass("checked");
		},
		submitHandler: function(form) {		
		    var data = $('#form :input');
			$.post('{url $mod.$ctl.$act/hash:$hash}', data, function(r) {
				Wind.message.showResponse(r, function() {
					$('#form input[name="reset"]').click();
				});
			}, 'json');
		}
	});
});

//]]>
</script>
<!--{tpl footer}-->