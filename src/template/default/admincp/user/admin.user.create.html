{tpl header}
{tpl user/admin.user.navtab}

<form id="form" action="index.php?user.admin.user.create" method="post" enctype="multipart/form-data" target="_self">
  <input type="hidden" name="hash" value="{$hash}" />
  <input type="hidden" name="type" value="{$type}" />
  <table width="100%" border="0" cellspacing="0" cellpadding="0" class="tb mt">
    <tr>
        <th width="140" align="right" valign="middle">角色</th>
        <td>
          {if $type == 'admin'}
            {loop $roles $rk $role}
            <label for="role_{$role['roid']}"><input id="role_{$role['roid']}" type="checkbox" name="role[]" value="{$role['roid']}" required />{$role['name']}</label>
            {/loop} 
          {else}  
          <select name="role[]"  required="required" autocomplete="off">
            <option value="" selected="selected">请选择角色</option>
            <!--{loop $roles $rk $role}-->
            <option value="{$role['roid']}" {if !$rk}selected="selected"{/if} >{$role['name']}</option>
            <!--{/loop}-->
          </select>              
          {/if}
          <b class="red">*</b>
          <label class="red error" for="role[]" style="display: none;">请选择角色。</label>    
        </td>
    </tr>
    <tr>
        <th width="140" align="right" valign="middle">名号</th>
        <td><input name="nickname" type="text" class="text-box" id="nickname" value="{$_POST['nickname']}" /> <b class="red">*</b></td>
    </tr>
    <tr>
        <th width="140" align="right" valign="middle">用户名</th>
        <td><input name="uname" type="text" class="text-box" id="uname" value="{$_POST['uname']}" /> <b class="red">*</b></td>
    </tr>
    <tr>
        <th width="140" align="right" valign="middle">手机</th>
        <td><input name="mobile" type="text" class="text-box" id="mobile" value="{$_POST['mobile']}" /> </td>
    </tr>
    <tr>
        <th width="140" align="right" valign="middle">邮箱</th>
        <td><input name="email" type="text" class="text-box" id="email" value="{$_POST['email']}" /> <b class="red">*</b></td>
    </tr>
    <tr>
        <th width="140" align="right" valign="middle">头像</th>
        <td>
        <img src="{$nopic}" width="80" height="80" style="border:1px solid #DDD; margin:0 0 5px 0" />
        <br />
        <input type="file" name="avatar" />
        </td>
    </tr>
    <tr>
        <th width="140" align="right" valign="middle">密码</th>
        <td><input name="password" type="text" class="text-box" id="password" value="{$_POST['password']}" /> <b class="red">*</b></td>
    </tr>
    <tr>
        <th width="140" align="right" valign="middle">描述</th>
        <td><textarea name="description" cols="40" rows="4">{$_POST['description']}</textarea></td>
    </tr>
    <tr>
        <th width="140" align="right" valign="middle">状态</th>
        <td>
          {loop $userStatusList $k $v}
          <label for="status_{$v}"><input name="status" id="status_{$v}" type="radio" {if $k == 1}checked="checked"{/if} value="{$k}" />{$v}</label>
          {/loop}
        </td>
    </tr>
    {if $type == 'ext'}
    <tr>
        <th width="140" align="right" valign="middle">商家状态</th>
        <td>
          <label><input type="radio" name="isextvalid" value="1" checked="checked" />已审核</label>
          <label><input type="radio" name="isextvalid" value="0" />未审核</label>
        </td>
    </tr>
    {/if}
    <tr>
        <th align="right" valign="middle" class="nobd">&nbsp;</th>
        <td class="nobd"><input class="btn" type="submit" value="保存" />
            <input name="重置" type="reset" class="btn" value="重置" /></td>
    </tr>
  </table>
</form>

<script type="text/javascript">
//<![CDATA[
$(function(){
	var validator = $("#form").validate({
		rules: {
			nickname: "required",
			uname: "required",
			role: "required",
			password: "required",
			email: "required"
		},
		messages: {
			nickname: "请输入名号",
			uname: "请输入用户名",
			role: "请选择角色",
			password: "请输入密码",
			email: "请输入邮箱"
		},
		errorPlacement: function(error, element) {
			error.appendTo( element.next() );				
		},
		success: function(label) {
			label.html("&nbsp;").addClass("checked");
		}
	});
});
//]]>
</script>

{tpl footer}